{
  "hash": "a83519a7787b140e4d15aaf33b97de6d",
  "result": {
    "markdown": "---\ntitle: \"Dissecting Footy Grid Combinations\"\ndescription: |\n  [Footy grid](https://footygrid.com/){target=\"_blank\"} has been a phenomanon amongst trivia-loving footy fans in recent weeks. In this post I use AFL data to get disect the most difficult combinations.\ndate: 2023-08-13\ncategories: \n  - Sport\n  - AFL\n  - R\n  - Data\n  - Footy Grid\nimage: footy-grid.jpg\nreference-location: margin\ndraft: true\nfreeze: true\nreading-time: true\n---\n\n::: {.cell}\n\n:::\n\n\n\n# What is Footy Grid?\n\n[Footy grid](https://footygrid.com/){target=\"_blank\"} is a daily AFL-themed trivia game for testing your knowledge of past and present players. The idea is pick players that intersect between two categories. These categories typically include teams, as well career or best season statistics (goals, kicks etc.), awards (Brownlow, Norm Smith) and other (e.g. height).\n\nYou are awarded a rarity score based on what other players of the game have chosen, the lower your score the rarer the player. Given people know this, sometimes a less obvious player is actually more selected than the most obvious. For example, in today's grid [Scotty Lucas](https://afltables.com/afl/stats/players/S/Scott_Lucas.html){target=\"_blank\"} was actually the most popular[^popular] *Essendon player to kick more than 50 goals in a season* over [Matthew Lloyd](https://afltables.com/afl/stats/players/M/Matthew_Lloyd0.html){target=\"_blank\"} (who I would have thought would be the most obvious).\n\n[^popular]: the game allows you to see the most popular selections once you have attempted it\n\n![](todays-grid.png)\n\n\n## My Performance\n\nI would say I am a relatively average[^average-player] player at the game. While it varies quite a lot, I would say a solid score for me is when I am better than around 40%[^why-40-is-average] of players (although I will occasionally score in the 80^th^ or even 90^th^ percentile if it aligns with my area of expertise[^expertise]). My attempt on the 8^th^of August is below:\n\n[^average-player]: Among a sea of footy tragics, so I don't take any shame in this\n\n[^why-40-is-average]: I will elaborate on why I think the 40^th^ percentile is at least average if not above average below\n\n[^expertise]: For example, I tend to be pretty solid at pulling out obscure Eagles and Dockers players from the late 2000's and early 2010's\n\n::: {.callout-warning collapse=\"true\"}\n\n### Spoilers\n\n![](my-attempt.jpg) \n\n:::\n\n\nYou will notice that my attempt is missing an answer for the middle square of the grid (Essendon and Collingwood player) and that is because I could not figure out that answer and took a wild stab. As I discovered later on, the most popular player for that question was an obscure player from the late 1990's and early 2000's ([Andrew Ukovic](https://afltables.com/afl/stats/players/A/Andrew_Ukovic.html){target=\"_blank\"}[^youth]) that I am certain most people had to look up or entered on their second attempt when they saw he was most popular. \n\n\n[^youth]: perhaps I am too young and he was actually a household name but I somehow highly doubt this given his mediocre career statistics\n\nThis is why I would say I am average as opposed to below average for being in the 40^th^ percentile, a lot of the scores on there are people attempting the grid multiple times or even *cheating*[^definition-of-cheating] on their first time. I don't really care if people do that but for me it's a lot more fun doing it without any kind of assistance[^feel-better].\n\n[^definition-of-cheating]: I have seen varying interpretations of what counts as cheating, but I would certainly say googling the answer and then entering a player you have never heard of is cheating\n\n\n[^feel-better]: and perhaps it also make me feel better when I see my less than stellar percentiles\n\n# Most Diffcult Combinations\n\n## List of Categories\n\nBelow is an exhaustive list of all the categories that have appeared in Footy Grid between the 21^st^ of July and the 29^th^ of August 2023 (the dates that are currently visible on the website on the date of writing this):\n\n\n* Club played for [^university-and-fitzroy]^,^ [^swans-brisbane-bulldogs] \n\n* Played in a particular decade[^decade]:\n  \n    - 80's \n    \n    - 90's \n    \n    - 00's\n\n    \n* Season stats [^season-stats]^,^[^career-stats]:\n\n    - \\>50 goals\n    \n    - 300+ kicks\n    \n    - Average 2+ goals\n    \n    - Average 25+ disposals\n    \n    - Average 5+ marks\n    \n    - Average 5+ tackles\n    \n    - Average 100+ fantasy points\n    \n    - Won 15+ games\n    \n    - Lost 15+ games\n\n\n* Career stats [^season-stats]^,^[^career-stats]:\n\n    - Played 20 or less games\n    \n    - Played 50 or less games\n    \n    - Played 200 or more games\n    \n    - Never scored a goal\n    \n    - 250+ goals\n    \n    - 250+ games\n\n    - 2500+ kicks\n    \n    - 500+ tackles\n    \n    - All Time Top 50 Goal Kicker\n    \n* Game stats[^season-stats]^,^[^career-stats]:\n\n    - 5+ goals\n    \n    - 10+ marks\n    \n    - 10+ tackles\n    \n    - 30+ disposals\n    \n    - 40+ disposals\n    \n    - 25+ disposals in a final\n\n* Grand Final Player\n\n* One Club Player\n\n* Awards:\n\n    - Brownlow Medalist\n    \n    - Club Best and Fairest (1980 onwards)\n    \n    - Colman Medalist\n    \n    - Rising Star Nomination\n    \n    - Norm Smith Medalist\n\n* Height:\n\n    - Taller than 195cm\n    \n    - Under 185cm\n    \n* Name[^player-name]:\n\n    - First name Jack\n    \n    \n* Left footers[^footedness]\n\n\n* One-Club Player\n\n\n* Coached by:\n\n    - Ross Lyon\n    \n    - Brad Scott\n    \n    - Leigh Matthews\n    \n\n* Teammate of[^Teammate]:\n\n    - Lance Franklin\n    \n    - Isaac Smith\n    \n    - Nic Naitanui\n    \n    - Andrew Phillips\n    \n    - Scott Pendlebury\n    \n    - Jack Riewoldt\n    \n    - Jack Ziebell\n    \n    - Brodie Grundy\n    \n    - Dustin Fletcher\n    \n    - Luke Shuey\n    \n    - Tom Rockliff\n    \n    - Phil Davis\n    \n    - Stephen Coniglio\n    \n    - Dylan Buckley\n    \n    - Daniel Gorringe\n\n* Guernsey number: \n\n    - Single digit \n    \n    - Double digit \n\n* All Australian (1991 to present)\n\n[^Teammate]: These ones typically honour retirees\n\n[^footedness]: Data available 2013 onwards\n\n[^player-name]: there will probably be other names that crop up in the future\n\n[^university-and-fitzroy]: University and Fitzroy as defunct teams will never appear as a category, although it says in the Footy Grid help page that Fitzroy will be combined in with Brisbane in the future\n\n[^swans-brisbane-bulldogs]: The South Melbourne and Sydney swans; the Brisbane Bears and Lions; Footscray and Western Bulldogs are grouped together\n\n[^decade]: we can probably extend this to played in any decade, these are just the decades we have seen so far\n\n[^career-stats]: there are probably different stats and thresholds that will appear in the future\n\n[^season-stats]: includes finals\n\nAs it is the most prominent category, we will mainly focus on teams in this article but some of the other categories may appear as well. Also note that generally, according the the rules, when a team category intersects with a non-team category, the player need not have satisfied the category whilst playing at the club[^category-explain1].\n\n[^category-explain1]: e.g. [Gary Ablett Jr.](https://afltables.com/afl/stats/players/G/Gary_Ablett1.html) counts as a Grand Final player for Gold Coast even though he only ever played in grand finals for Geelong\n\n\n## Obtaining the Data\n\nIn order to look through the possible combinations, I will use R as I did in my [previous post](../over-analysing-idle-footy-chat/index.qmd){target=\"_blank\"}. Likewise, I will also be using the `fitzRoy` package to obtain my data. Footy Grid has the full history of AFL players, so I will use the [fryzigg](https://twitter.com/fryzigg){target=\"_blank\"} data. There are also some player details that are needed and for that, I will use the [AFL Tables](https://afltables.com/afl/afl_index.html){target=\"_blank\"}.\n\n\nLet's begin by loading our required packages[^not-using-data.table].\n\n[^not-using-data.table]: As I outline [below](#data-wrangling), I will only be using tidyverse for data wrangling this time.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(fitzRoy)\nlibrary(fst)\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(stringr)\nlibrary(rvest)\n```\n:::\n\n\n\nWe will get the data using the following code[^data-import]:\n\n[^data-import]: Note that I am using the [`fst`](https://www.fstpackage.org/){target=\"blank\"} package below to save the data locally instead of using RDS files on suggestion from one of the readers of my previous posts (see the \"Being a good citizen\" call-out in my [previous post](../over-analysing-idle-footy-chat/index.qmd#importing-the-data){target=\"_blank\"} for more information on why I save the output locally)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nif(file.exists(\"data/player_stats_fryzigg.fst\")) {\n  player_stats_fryzigg <- read_fst(\"data/player_stats_fryzigg.fst\") |> as_tibble()\n  \n} else {\n  player_stats_fryzigg <-  fetch_player_stats_fryzigg(season = 1897:2023)\n  write_fst(player_stats_fryzigg, \"data/player_stats_fryzigg.fst\")\n}\n\nif(file.exists(\"data/player_details.fst\")) {\n  player_details <- read_fst(\"data/player_details.fst\") |> as_tibble()\n  \n} else {\n  player_details <- fetch_player_details_afltables()\n  write_fst(player_details, \"data/player_details.fst\")\n}\n```\n:::\n\n\n\n\n## Other Data Sources\n\nWhile the `fitzRoy` sources provide most of the data we need but some data is still missing.\n\n\n### Brownlow medal data\n\nAs with the Norm Smith medal in my previous post, the Brownlow medal winners are not available in the `fitzRoy` data. However they are available on [AFL Tables](https://afltables.com/afl/brownlow/brownlow_idx.html), [Wikipedia](https://en.wikipedia.org/wiki/List_of_Brownlow_Medal_winners#Winners_by_season) and the [official AFL Website](https://www.afl.com.au/brownlow-medal/history). As it turns out, the easiest one to scrape is the AFL website, so that is what we will use.\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# get brownlow\nbrownlow_url <- \"https://www.afl.com.au/brownlow-medal/history\"\n\nbrownlow_url |> \n  read_html() ->\n  brownlow_html\n\nbrownlow_html |> \n  html_table(header = TRUE) |> \n  _[[1]] |> \n  View()\n```\n:::\n\n\n\n### All-Australian Data\n\nThe official AFL website has a table of all the all players selected in All Australian Teams since 1953 [here](https://www.afl.com.au/all-australian/history)[^pre-1991].\n\n[^pre-1991]: Before 1991 it was either the VFL team of the year or based on the interstate carnival, hence why Footy Grid only considers All Australian from 1991 onwards\n\n\n::: {.cell}\n\n```{.r .cell-code}\n\"data-Dtbc3.csv\"\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"data-Dtbc3.csv\"\n```\n:::\n:::\n\n\n## Data Wrangling\n\nUnlike the [previous post](../over-analysing-idle-footy-chat/index.qmd#tidyverse-versus-data.table){target=\"_blank\"}, I will only use the tidyverse[^not-data.table].\n\n\n[^not-data.table]: While the experiment of producing both tidyverse and `data.table` of the code was an interesting one, I have decided that it is probably too time consuming going forward.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplayer_stats_fryzigg$player_team |> unique() -> teams_fryzigg\nplayer_details$Team |> unique() -> teams_afl_tables\n\ntribble(\n  ~team_name_raw, ~team_name,\n  \"Adelaide\", \"Adelaide\",\n  \"Brisbane Lions\", \"Brisbane Lions\",\n  \"Brisbane Bears\", \"Brisbane Lions\", #\"Brisbane Bears\",\n  \"Carlton\", \"Carlton\",\n  \"Collingwood\", \"Collingwood\",\n  \"Essendon\", \"Essendon\",\n  \"Fitzroy\", \"Fitzroy\",\n  \"Fremantle\", \"Fremantle\",\n  \"GWS\", \"Greater Western Sydney\",\n  \"Greater Western Sydney\", \"Greater Western Sydney\",\n  \"Geelong\", \"Geelong\",\n  \"Gold Coast\", \"Gold Coast\",\n  \"Hawthorn\", \"Hawthorn\",\n  \"Melbourne\", \"Melbourne\",\n  \"North Melbourne\", \"North Melbourne\",\n  \"Port Adelaide\", \"Port Adelaide\",\n  \"Richmond\", \"Richmond\",\n  \"St Kilda\", \"St Kilda\",\n  \"Sydney\", \"Sydney\",\n  \"West Coast\", \"West Coast\",\n  \"University\", \"University\",\n  \"Western Bulldogs\", \"Western Bulldogs\"\n) ->\n  team_name_mapping\n\n\nplayer_stats_fryzigg |> \n  select(player_first_name, player_last_name, match_round, match_date, metres_gained) |> \n  View()\n\nplayer_details |> \n  mutate(\n    player_first_season = as.integer(str_sub(Seasons, 1, 4))\n  ) |> \n  select(\n    player_full_name = Player,\n    player_team = Team,\n    player_first_season,\n    player_height = HT,\n    player_weight = WT,\n  ) ->\n  player_details_modified\n\nplayer_stats_fryzigg |> \n  mutate(\n    match_season = as.integer(str_sub(match_date, 1, 4)),\n    match_date = as.Date(match_date, format = \"%Y-%m-%d\"),\n    season_decade = paste0(str_sub(match_season, 1, 3), \"0s\")\n    ) |> \n  group_by(\n    player_id, player_team\n  ) |> \n  mutate(\n    player_first_season = min(match_season)\n  ) |> \n  ungroup() |> \n  group_by(\n    player_id, player_first_name, player_last_name, player_first_season, player_team, \n    match_season, season_decade\n  ) |> \n  summarise(\n    .groups = \"drop\",\n    season_games = n(),\n    season_disposals = sum(disposals, na.rm = TRUE),\n    season_kicks = sum(kicks, na.rm = TRUE),\n    season_handballs = sum(handballs, na.rm = TRUE),\n    season_marks = sum(marks, na.rm = TRUE),\n    season_goals = sum(goals, na.rm = TRUE),\n    season_behinds = sum(behinds, na.rm = TRUE),\n    season_hitouts = sum(hitouts, na.rm = TRUE),\n    season_tackles = sum(tackles, na.rm = TRUE)\n  ) |> \n  View()\n\n\n\nplayer_details |> \n  filter(is.na(Goals)) |> \n  arrange(desc(Games)) |> \n  View()\n```\n:::\n\n\n\n## Final Output\n\n\n\n# Player Lookup Table\n\nBelow I have a lookup table, this table is not for cheating purposes but more done as an exercise and perhaps for looking into who some obscure examples might have been after you have attempted the quiz on the day. I may continue to update this as new categories get introduced, but for now I present it with all the categories that have come about between the 21^st^ of July and the 8^th^ of August 2023.\n\n# Comments\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}