---
Title: Goals
execute:
  echo: false
  warning: false
format:
  html:
    page-layout: full
    code-link: true
    code-line-numbers: true
---

# Goals

This page is a collation of my goals (prospective) and achievements (retrospective). The purpose is to be something of a reminder of both how far I have come and what I am working towards. My vague cutoff is from my university days onwards.


::: {.callout-tip}

## Non-linearity

I would also like to emphasise the non-linearity and compounding nature of personal progress. As such, I have also included some *roadblocks* and *failures* I have experience along the way.

This is my attempt to run counter to what one might see on a resume or social media (successes only). I am also doing this as a reminder that:

* Not all ventures succeed (and this is okay).
* It is from failures that we often learn the most.
* Without risking failure, we will never dare to do anything bold.

:::




```{r setup}
source("../scripts/reactable-theming.R")
library(googlesheets4)
library(dplyr)
library(glue)
library(purrr)
library(reactable)
library(reactablefmtr)
library(tippy)
library(htmltools)


```



```{r}
display_text_as_tooltip <- function(value, index) {
  

  if(is.na(value)) {
    return("")
  } else {
    return(tippy("Hover for detail", interactive = TRUE, tooltip = value))
    
  }
  
}
```


```{r get data}
ss <- gs4_get("https://docs.google.com/spreadsheets/d/1kRK0zWsGz7GOHhtWSaV_9SlZ2zRxns_pVEh4YMJtsLQ/edit#gid=0")
goals_tb <- read_sheet(ss, sheet = "Goals") |> 
  filter(!is.na(project))
projects_tb <- read_sheet(ss, sheet = "Projects") |> 
  filter(!is.na(project))
categories_tb <- read_sheet(ss, sheet = "Categories")

combined_tb <- left_join(projects_tb, goals_tb, by = "project") |> 
  left_join(categories_tb, by = "category") |> 
  select(category, info1,  info2, completed_flag, goal, goal_completed_flag)

```



```{r}
goals_table_category <- function(category_label) {
  categories_tb |>
    filter(category == category_label) -> categories_tb_filtered
  
  info1_label <- categories_tb_filtered$info1_label  
  info2_label <- categories_tb_filtered$info2_label  
  
  renaming_list <- `names<-`(c("info1", "info2"), c(info1_label, info2_label))
  
  info_col_spec <- list(
    colDef(
      ),
    colDef(
        aggregate = JS_return_first_value,
        cell = \(value, row_index, column_name) ""
      )
  ) |> 
    `names<-`(value = c(info1_label, info2_label))
  
  
  combined_tb |> 
    filter(category == category_label) |> 
    select(-category) |> 
    rename(all_of(renaming_list)) |> 
    reactable_themed(
      groupBy = info1_label,
      pagination = FALSE,
      columns = list(
      ) |> 
        c(info_col_spec)
      )
  
}


```



:::: {.column-screen}
::: {.panel-tabset}

## Study

```{r}
goals_table_category("Study")
```


## Professional

```{r}
goals_table_category("Professional")
```




## Personal Projects

```{r}
goals_table_category("Personal Projects")
```

## Extracurricular Activities


```{r}
goals_table_category("Extracurricular")
```



:::
::::


```{r}
#| column: page
#| eval: FALSE

# combined_tb <- left_join(projects_tb, goals_tb, by = "project") |> 
#   select(category, goal_label, start_date, completion_date, sub_goal, sub_goal_start_date, sub_goal_completion_date, sub_goal_description, sub_goal_completed_flag) |> 
#   arrange(category, start_date) |>
#   select(-start_date, -completion_date) 

combined_tb |> 
  reactable_themed(
    groupBy = c("category", "goal_label"),
    defaultExpanded = FALSE,
    columns = list(
      category = colDef(
        name = "Category"
        # ,
        # style = reactable_merged("category")
        ),
      goal_label = colDef(
        name = "Goal"
        # ,
        # style = reactable_merged("goal_label")
        ),
      sub_goal = colDef(
        name = "Sub-Goal"
        ),
      sub_goal_start_date = colDef(
        name = "Start Date",
        aggregate = "min",
        format = colFormat(date = TRUE)
      ),
      sub_goal_completion_date = colDef(
        name = "Completion Date",
        aggregate = "max",
        format = colFormat(date = TRUE)
      ),
      sub_goal_description = colDef(
        name = "Description",
        cell = display_text_as_tooltip
      ),
      sub_goal_completed_flag = colDef(
        name = "Completed"
      )
      ),
    pagination = FALSE
    )


```


